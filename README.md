# BD TicketPro ЁЯЫл

ржПржХржЯрж┐ рж╕ржорзНржкрзВрж░рзНржг ржУ ржЖржзрзБржирж┐ржХ **Travel Agency Management System** ржпрж╛ ржмрж┐рж╢рзЗрж╖ржнрж╛ржмрзЗ ржмрж╛ржВрж▓рж╛ржжрзЗрж╢рзА ржЯрзНрж░рж╛ржнрзЗрж▓ ржПржЬрзЗржирзНрж╕рж┐рж░ ржЬржирзНржп ржбрж┐ржЬрж╛ржЗржи ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЖржирзНрждрж░рзНржЬрж╛рждрж┐ржХ ржлрзНрж▓рж╛ржЗржЯ ржЯрж┐ржХрзЗржЯ (ржмрж┐рж╢рзЗрж╖ржд ржоржзрзНржпржкрзНрж░рж╛ржЪрзНржпрзЗрж░ ржжрзЗрж╢ржЧрзБрж▓рж┐рж░) ржХрзНрж░ржпрж╝, ржмрж┐ржХрзНрж░ржпрж╝, ржмрзБржХрж┐ржВ ржПржмржВ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯрзЗрж░ ржЬржирзНржпред

## тЬи Features

### ЁЯФР **рж░рзЛрж▓-ржмрзЗрж╕ржб ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХржирзНржЯрзНрж░рзЛрж▓**
- **Admin**: рж╕ржорзНржкрзВрж░рзНржг ржЕрзНржпя┐╜я┐╜я┐╜ржХрзНрж╕рзЗрж╕ (ржЯрж┐ржХрзЗржЯ ржХрзНрж░ржпрж╝, ржмрж┐ржХрзНрж░ржпрж╝, ржкрзНрж░ржлрж┐ржЯ ржжрзЗржЦрж╛, ржмрзНржпрж╛ржЪ ржПржбрж┐ржЯ/ржбрж┐рж▓рж┐ржЯ)
- **Manager**: ржЯрж┐ржХрзЗржЯ ржжрзЗржЦрж╛ ржУ ржмрзБржХрж┐ржВ, рж╕рзЗрж▓ ржХржиржлрж╛рж░рзНржо (ржХрзНрж░ржпрж╝ ржорзВрж▓рзНржп ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЗ ржирж╛)
- **Staff**: рж╢рзБржзрзБ ржмрзБржХрж┐ржВ рждрзИрж░рж┐, ржЖржВрж╢рж┐ржХ ржкрзЗржорзЗржирзНржЯ (ржХрзНрж░ржпрж╝ ржорзВрж▓рзНржп ржмрж╛ ржУржнрж╛рж░рж░рж╛ржЗржб ржирзЗржЗ)

### ЁЯУК **ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржУ ржПржирж╛рж▓рж┐ржЯрж┐ржХрзНрж╕**
- ржЖржЬржХрзЗрж░ ржмрж┐ржХрзНрж░ржпрж╝ ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи
- ржорзЛржЯ ржмрзБржХрж┐ржВ ржУ рж▓ржХржб ржЯрж┐ржХрзЗржЯ
- ржЗржиржнрзЗржирзНржЯрж░рж┐ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
- ржЕржирзБржорж╛ржирж┐ржд рж▓рж╛ржн (рж╢рзБржзрзБ ржЕрзНржпрж╛ржбржорж┐ржи)
- рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо ржбрзНржпрж╛ржЯрж╛ ржЖржкржбрзЗржЯ

### ЁЯМН **ржХрж╛ржирзНржЯрзНрж░рж┐ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ**
- ржжрзЗрж╢ржнрж┐рждрзНрждрж┐ржХ ржЯрж┐ржХрзЗржЯ ржЧрзНрж░рзБржкрж┐ржВ
- ржЯрж┐ржХрзЗржЯ ржЙржкрж▓ржмрзНржзрждрж╛рж░ ржЗржирзНржбрж┐ржХрзЗржЯрж░
- ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрзНржЯрж┐ржн ржХрж╛ржирзНржЯрзНрж░рж┐ ржХрж╛рж░рзНржб
- ржоржзрзНржпржкрзНрж░рж╛ржЪрзНржпрзЗрж░ ржкрзНрж░ржзрж╛ржи ржжрзЗрж╢ржЧрзБрж▓рж┐рж░ рж╕рж╛ржкрзЛрж░рзНржЯ

### ЁЯОл **ржЯрж┐ржХрзЗржЯ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ**
- ржмрзНржпрж╛ржЪржнрж┐рждрзНрждрж┐ржХ ржЯрж┐ржХрзЗржЯ ржХрзНрж░ржпрж╝
- ржЗржиржнрзЗржирзНржЯрж░рж┐ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
- рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ (Available, Locked, Sold)
- ржЙржирзНржиржд ржлрж┐рж▓рзНржЯрж╛рж░рж┐ржВ ржУ рж╕рж╛рж░рзНржЪ

### ЁЯТ│ **ржмрзБржХрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржо**
- 4-рж╕рзНржЯрзЗржк ржмрзБржХрж┐ржВ ржкрзНрж░рж╕рзЗрж╕
- ржлрзБрж▓/ржкрж╛рж░рзНрж╢рж┐ржпрж╝рж╛рж▓ ржкрзЗржорзЗржирзНржЯ ржЕржкрж╢ржи
- ржЕржЯрзЛ рж▓ржХ рж╕рж┐рж╕рзНржЯрзЗржо (24 ржШржирзНржЯрж╛)
- ржкрзЗржорзЗржирзНржЯ ржорзЗржержб рж╕рж╛ржкрзЛрж░рзНржЯ

### ЁЯЫТ **ржЕрзНржпрж╛ржбржорж┐ржи ржХрзНрж░ржпрж╝ ржоржбрж┐ржЙрж▓**
- ржПржЬрзЗржирзНржЯ ржЗржиржлрж░рзНржорзЗрж╢ржи ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
- ржЗржиржнржпрж╝рзЗрж╕ ржЖржкрж▓рзЛржб
- ржкрзНрж░ржлрж┐ржЯ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи
- ржкрж╛рж░ржЪрзЗржЬ рж╣рж┐рж╕рзНржЯрзНрж░рж┐ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ

### тЪЩя╕П **рж╕рж┐рж╕рзНржЯрзЗржо рж╕рзЗржЯрж┐ржВрж╕**
- ржХрзЛржорзНржкрж╛ржирж┐ ржЗржиржлрж░рзНржорзЗрж╢ржи
- ржЗржЙржЬрж╛рж░ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
- ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи рж╕рзЗржЯрж┐ржВрж╕
- ржмрзНржпрж╛ржХржЖржк ржУ ржПржХрзНрж╕ржкрзЛрж░рзНржЯ

## ЁЯЪА Tech Stack

### Frontend
- **React 18** with TypeScript
- **Vite** for build tooling
- **TailwindCSS 3** for styling
- **Framer Motion** for animations
- **Radix UI** components
- **React Router 6** for navigation
- **Tanstack Query** for data fetching

### Backend
- **Node.js** with Express
- **SQLite** database with Better-SQLite3
- **JWT** authentication
- **Zod** for validation
- **bcryptjs** for password hashing

### Development
- **TypeScript** throughout
- **ESLint** & **Prettier**
- **Vitest** for testing
- Hot reload for development

## ЁЯУж Installation

### Prerequisites
- Node.js 18+ 
- npm, yarn, or pnpm

### Quick Start

```bash
# Clone the repository
git clone <repository-url>
cd bd-ticketpro

# Install dependencies
npm install

# Copy environment variables
cp .env.example .env

# Start development server
npm run dev
```

The application will be available at `http://localhost:8080`

### Default Login Credentials

```
Admin:   admin / admin123
Manager: manager / manager123  
Staff:   staff / staff123
```

## ЁЯПЧя╕П Project Structure

```
bd-ticketpro/
тФЬтФАтФА client/                 # React frontend
тФВ   тФЬтФАтФА components/         # Reusable UI components
тФВ   тФЬтФАтФА pages/             # Page components
тФВ   тФЬтФАтФА context/           # React Context providers
тФВ   тФЬтФАтФА services/          # API service layer
тФВ   тФФтФАтФА global.css         # Global styles
тФВ
тФЬтФАтФА server/                # Express backend
тФВ   тФЬтФАтФА database/          # Database schema & models
тФВ   тФЬтФАтФА routes/            # API route handlers
тФВ   тФЬтФАтФА middleware/        # Express middleware
тФВ   тФФтФАтФА index.ts           # Main server file
тФВ
тФЬтФАтФА shared/                # Shared types & interfaces
тФВ   тФФтФАтФА api.ts             # API type definitions
тФВ
тФФтФАтФА dist/                  # Production build output
```

## ЁЯФз Configuration

### Environment Variables

Copy `.env.example` to `.env` and configure:

```env
# Server
NODE_ENV=production
PORT=8080
JWT_SECRET=your-super-secret-key

# Database
DATABASE_URL=./bd-ticketpro.db

# CORS
ALLOWED_ORIGINS=https://your-domain.com

# Features
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_AUTO_BACKUP=true
```

### Database Setup

The application uses SQLite with automatic initialization:

```bash
# Database will be created automatically on first run
# Sample data is seeded automatically
# Database file: bd-ticketpro.db
```

## ЁЯЪА Production Deployment

### Build for Production

```bash
# Build both client and server
npm run build

# Start production server
npm start
```

### Docker Deployment

```dockerfile
FROM node:18-alpine

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

EXPOSE 8080
CMD ["npm", "start"]
```

### Environment Setup

```bash
# Create production environment file
cp .env.example .env.production

# Update with production values
NODE_ENV=production
JWT_SECRET=your-production-secret
ALLOWED_ORIGINS=https://your-domain.com
```

## ЁЯУЭ API Documentation

### Authentication

```bash
# Login
POST /api/auth/login
{
  "username": "admin",
  "password": "admin123"
}

# Get current user
GET /api/auth/me
Authorization: Bearer <token>
```

### Tickets

```bash
# Get all tickets
GET /api/tickets?country=KSA&status=available

# Get tickets by country
GET /api/tickets/country/KSA

# Update ticket status
PATCH /api/tickets/:id/status
{
  "status": "sold"
}
```

### Bookings

```bash
# Create booking
POST /api/bookings
{
  "ticketId": "ticket-id",
  "agentInfo": { "name": "Agent Name" },
  "passengerInfo": { "name": "Passenger", "passportNo": "123456" },
  "paymentType": "full"
}

# Update booking status
PATCH /api/bookings/:id/status
{
  "status": "confirmed"
}
```

## ЁЯФР Security Features

- JWT-based authentication
- Role-based access control (RBAC)
- Password hashing with bcrypt
- CORS protection
- Input validation with Zod
- SQL injection prevention
- Activity logging

## ЁЯУК Database Schema

### Core Tables
- `users` - User accounts and roles
- `countries` - Destination countries
- `airlines` - Airline information
- `ticket_batches` - Bulk ticket purchases
- `tickets` - Individual tickets
- `bookings` - Customer bookings
- `system_settings` - Application configuration
- `activity_logs` - Audit trail

## ЁЯФД Backup & Recovery

### Automatic Backups
```bash
# Enable auto-backup in .env
ENABLE_AUTO_BACKUP=true
BACKUP_INTERVAL=24h
BACKUP_RETENTION=30d
```

### Manual Backup
```bash
# Export data
GET /api/settings/export/data?format=csv

# Database file backup
cp bd-ticketpro.db backup-$(date +%Y%m%d).db
```

## ЁЯРЫ Troubleshooting

### Common Issues

1. **Database Permission Error**
   ```bash
   chmod 755 ./
   chmod 666 bd-ticketpro.db
   ```

2. **Port Already in Use**
   ```bash
   export PORT=3001
   npm run dev
   ```

3. **Build Errors**
   ```bash
   rm -rf node_modules
   npm install
   npm run build
   ```

## ЁЯдЭ Contributing

1. Fork the repository
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request

## ЁЯУД License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ЁЯЖШ Support

For support and questions:
- Create an issue on GitHub
- Email: support@bdticketpro.com
- Documentation: [docs.bdticketpro.com](https://docs.bdticketpro.com)

---

**BD TicketPro** - ржоржзрзНржпржкрзНрж░рж╛ржЪрзНржпрзЗрж░ ржлрзНрж▓рж╛ржЗржЯ ржЯрж┐ржХрзЗржЯ ржмрзНржпржмрж╕рж╛рж░ ржЬржирзНржп рж╕ржорзНржкрзВрж░рзНржг рж╕ржорж╛ржзрж╛ржи тЬИя╕П
